<!DOCTYPE html>
</form>
</div>


<div class="block">
<h2>New Reply</h2>
<form id="newReply">
<input id="rBoard" name="board" placeholder="board" required><br>
<input name="thread_id" placeholder="Thread ID" required><br>
<textarea name="text" placeholder="Reply text" required></textarea><br>
<input name="delete_password" placeholder="Delete password" required><br>
<button>Submit</button>
</form>
</div>


<div class="block">
<h2>Report Reply</h2>
<form id="reportReply">
<input id="rrBoard" name="board" placeholder="board" required><br>
<input name="thread_id" placeholder="Thread ID" required><br>
<input name="reply_id" placeholder="Reply ID" required><br>
<button>Report</button>
</form>
</div>


<div class="block">
<h2>Delete Reply</h2>
<form id="deleteReply">
<input id="drBoard" name="board" placeholder="board" required><br>
<input name="thread_id" placeholder="Thread ID" required><br>
<input name="reply_id" placeholder="Reply ID" required><br>
<input name="delete_password" placeholder="password" required><br>
<button>Delete</button>
</form>
</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
function sendAjax(form, method, boardInput) {
$(form).submit(function(e) {
e.preventDefault();
const board = $(boardInput).val();
$.ajax({
type: method,
url: `/api/${form.includes('Reply') ? 'replies' : 'threads'}/${board}`,
data: $(this).serialize(),
success: d => alert(JSON.stringify(d, null, 2)),
error: e => alert('Error: ' + e.responseText)
});
});
}


$('#newThread').submit(function(){
const board = $('#tBoard').val();
$(this).attr('action', `/api/threads/${board}`);
});
$('#newReply').submit(function(){
const board = $('#rBoard').val();
$(this).attr('action', `/api/replies/${board}`);
});


sendAjax('#reportThread','PUT','#rtBoard');
sendAjax('#deleteThread','DELETE','#dtBoard');
sendAjax('#reportReply','PUT','#rrBoard');
sendAjax('#deleteReply','DELETE','#drBoard');
</script>
</body>
</html>
