<!DOCTYPE html>
<html>
  <head>
    <title>Venyma Network</title>
    <meta name="description" content="Venyma Network" />
    <link id="favicon" rel="icon" href="https://raw.githubusercontent.com/venyma/logos/refs/heads/main/icon.png" type="image/png" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <h1>Venyma Network</h1>
    </header>

    <h2><a href="/b/general/">Go to <i>'/b/general/'</i> board</a></h2>
    <hr style="margin: 50px" />

    <div id="testui" style="margin-left: 5%">
      <h2>API Tests:</h2>

      <h4>New thread (POST /api/threads/:board)</h4>
      <form id="newThread">
        <input type="text" id="board1" name="board" placeholder="board" required /><br/>
        <textarea name="text" placeholder="Thread text..." required></textarea><br/>
        <input type="text" name="delete_password" placeholder="password to delete" required /><br/>
        <input type="submit" value="Submit" />
      </form>
      <hr/>

      <h4>Report thread (PUT /api/threads/:board)</h4>
      <form id="reportThread">
        <input type="text" id="board2" name="board" placeholder="board" required /><br/>
        <input type="text" name="thread_id" placeholder="id to report" required /><br/>
        <input type="submit" value="Submit" />
      </form>
      <hr/>

      <h4>Delete thread (DELETE /api/threads/:board)</h4>
      <form id="deleteThread">
        <input type="text" id="board3" name="board" placeholder="board" required /><br/>
        <input type="text" name="thread_id" placeholder="id to delete" required /><br/>
        <input type="text" name="delete_password" placeholder="password" required /><br/>
        <input type="submit" value="Submit" />
      </form>
      <hr/>

      <h4>New reply (POST /api/replies/:board)</h4>
      <form id="newReply">
        <input type="text" id="board4" name="board" placeholder="board" required /><br/>
        <input type="text" name="thread_id" placeholder="thread id" required /><br/>
        <textarea name="text" placeholder="Reply text..." required></textarea><br/>
        <input type="text" name="delete_password" placeholder="password to delete" required /><br/>
        <input type="submit" value="Submit" />
      </form>
      <hr/>

      <h4>Report reply (PUT /api/replies/:board)</h4>
      <form id="reportReply">
        <input type="text" id="board5" name="board" placeholder="board" required /><br/>
        <input type="text" name="thread_id" placeholder="thread id" required /><br/>
        <input type="text" name="reply_id" placeholder="id to report" required /><br/>
        <input type="submit" value="Submit" />
      </form>
      <hr/>

      <h4>Delete reply (DELETE /api/replies/:board)</h4>
      <form id="deleteReply">
        <input type="text" id="board6" name="board" placeholder="board" required /><br/>
        <input type="text" name="thread_id" placeholder="thread id" required /><br/>
        <input type="text" name="reply_id" placeholder="id to delete" required /><br/>
        <input type="text" name="delete_password" placeholder="password" required /><br/>
        <input type="submit" value="Submit" />
      </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(function () {
        $('#newThread').submit(function () {
          var board = $('#board1').val();
          $(this).attr('action', '/api/threads/' + board);
        });
        $('#newReply').submit(function () {
          var board = $('#board4').val();
          $(this).attr('action', '/api/replies/' + board);
        });

        function ajaxForm(formSelector, method, boardSelector) {
          $(formSelector).submit(function (e) {
            var url = `${formSelector.includes('Reply') ? '/api/replies/' : '/api/threads/'}${$(boardSelector).val()}`;
            $.ajax({
              type: method,
              url: url,
              data: $(this).serialize(),
              success: function (data) { alert(JSON.stringify(data)); }
            });
            e.preventDefault();
          });
        }

        ajaxForm('#reportThread','PUT','#board2');
        ajaxForm('#deleteThread','DELETE','#board3');
        ajaxForm('#reportReply','PUT','#board5');
        ajaxForm('#deleteReply','DELETE','#board6');
      });
    </script>
  </body>
</html>
